#!/usr/bin/env ruby

require 'octodown'
require 'optparse'

include Octodown

options = {}

OptionParser.new do |opts|
  opts.banner = 'Usage: octodown [options]'

  opts.on('-s', '--style [STYLE]', [:github, :atom], 'Choose style (atom, github)') do |s|
    options[:style] = s
  end

  opts.on_tail('-h', '--help', 'Show this message') do
    puts opts
    exit
  end
end.parse!

browser = Support::Browser.new
input_contents = ARGF.read
html_file = Support::Helpers.markdown_to_html input_contents,
  options[:style] || 'github'

browser.open html_file

exit
